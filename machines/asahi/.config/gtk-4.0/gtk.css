/* Capstan Cloud Theme for GTK4 (Nautilus) */

/* ==========================================
   Color Definitions (CSS Variables)
   ========================================== */

@define-color bg_primary #1a1917;
@define-color bg_darker #0f0e0d;
@define-color bg_elevated #262422;
@define-color bg_hover #393634;
@define-color bg_brass_dark #4a3828;
@define-color bg_brass_hover #5a4535;

@define-color accent #d4a366;
@define-color accent_light #ffd591;

@define-color text_primary #f7f7f5;
@define-color text_muted #8c8985;
@define-color text_on_accent #1a1917;

@define-color border_active #d4a366;
@define-color border_inactive #393634;

@define-color error #ff4d4f;
@define-color warning #faad14;
@define-color success #95de64;
@define-color info #597ef7;

/* ==========================================
   Window & Main Containers
   ========================================== */

window,
window.background,
.nautilus-window {
    background-color: @bg_primary;
    color: @text_primary;
}

/* ==========================================
   Header Bar
   ========================================== */

headerbar,
.titlebar {
    background-color: @bg_darker;
    color: @text_primary;
    border-bottom: 1px solid @border_inactive;
    box-shadow: none;
}

headerbar button,
.titlebar button {
    background-color: transparent;
    color: @text_primary;
    border: none;
    border-radius: 6px;
    padding: 6px 10px;
    min-height: 24px;
}

headerbar button:hover,
.titlebar button:hover {
    background-color: @bg_elevated;
}

headerbar button:active,
.titlebar button:active,
headerbar button:checked,
.titlebar button:checked {
    background-color: @bg_brass_dark;
    color: @accent;
}

/* Window title */
headerbar .title,
.titlebar .title {
    color: @text_primary;
    font-weight: 600;
}

/* ==========================================
   Sidebar / Navigation
   ========================================== */

.sidebar,
.navigation-sidebar,
placessidebar,
placessidebar list,
placessidebar scrolledwindow,
.nautilus-window .sidebar-pane,
.sidebar-pane {
    background-color: @bg_darker;
    border-right: 1px solid @border_inactive;
}

/* Sidebar banner/header area at top */
.sidebar banner,
.navigation-sidebar banner,
placessidebar banner,
.sidebar-banner,
.nautilus-window banner,
banner {
    background-color: @bg_darker;
    color: @text_primary;
}

/* Any box or container at the top of sidebar */
.sidebar > box,
.navigation-sidebar > box,
placessidebar > box {
    background-color: @bg_darker;
}

.sidebar row,
.navigation-sidebar row,
placessidebar row {
    color: @text_primary;
    border-radius: 6px;
    margin: 2px 6px;
    padding: 6px 10px;
    background-color: transparent;
}

.sidebar row:hover,
.navigation-sidebar row:hover,
placessidebar row:hover {
    background-color: @bg_elevated;
}

.sidebar row:selected,
.navigation-sidebar row:selected,
placessidebar row:selected {
    background-color: @bg_brass_dark;
    color: @accent;
}

.sidebar row:selected:hover,
placessidebar row:selected:hover {
    background-color: @bg_brass_hover;
}

/* Sidebar section headers */
.sidebar-section-label,
placessidebar .sidebar-section-label {
    color: @text_muted;
    font-size: 0.85em;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    background-color: transparent;
}

/* ==========================================
   Main Content Area
   ========================================== */

.view,
.content-view,
gridview,
listview,
columnview {
    background-color: @bg_primary;
    color: @text_primary;
}

/* File/folder items */
gridview > child,
listview > row,
columnview > row,
.content-view .view {
    background-color: transparent;
    color: @text_primary;
    border-radius: 8px;
}

gridview > child:hover,
listview > row:hover,
columnview > row:hover {
    background-color: @bg_elevated;
}

gridview > child:selected,
listview > row:selected,
columnview > row:selected {
    background-color: @bg_brass_dark;
    color: @text_primary;
}

gridview > child:selected:hover,
listview > row:selected:hover,
columnview > row:selected:hover {
    background-color: @bg_brass_hover;
}

/* ==========================================
   Path Bar / Breadcrumbs
   ========================================== */

.path-bar button,
.linked.path-bar > button {
    background-color: transparent;
    color: @text_primary;
    border: none;
    border-radius: 6px;
}

.path-bar button:hover {
    background-color: @bg_elevated;
}

.path-bar button:checked,
.path-bar button:active {
    background-color: @bg_brass_dark;
    color: @accent;
}

/* ==========================================
   Search Entry
   ========================================== */

searchentry,
entry {
    background-color: @bg_elevated;
    color: @text_primary;
    border: 1px solid @border_inactive;
    border-radius: 8px;
    padding: 8px 12px;
    caret-color: @accent;
}

searchentry:focus,
entry:focus {
    border-color: @accent;
    box-shadow: 0 0 0 2px alpha(@accent, 0.2);
}

searchentry placeholder,
entry placeholder {
    color: @text_muted;
}

/* ==========================================
   Scrollbars
   ========================================== */

scrollbar {
    background-color: transparent;
}

scrollbar slider {
    background-color: @bg_hover;
    border-radius: 10px;
    min-width: 8px;
    min-height: 8px;
}

scrollbar slider:hover {
    background-color: @text_muted;
}

scrollbar slider:active {
    background-color: @accent;
}

/* ==========================================
   Context Menus & Popovers
   ========================================== */

popover,
popover.background,
menu,
.context-menu {
    background-color: @bg_darker;
    color: @text_primary;
    border: 1px solid @border_inactive;
    border-radius: 12px;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
}

popover modelbutton,
popover button,
menu menuitem,
.context-menu menuitem {
    color: @text_primary;
    border-radius: 6px;
    padding: 8px 12px;
    margin: 2px 4px;
}

popover modelbutton:hover,
popover button:hover,
menu menuitem:hover,
.context-menu menuitem:hover {
    background-color: @bg_elevated;
}

popover modelbutton:active,
menu menuitem:active {
    background-color: @bg_brass_dark;
    color: @accent;
}

/* Accelerator labels in menus */
accelerator {
    color: @text_muted;
}

/* ==========================================
   Buttons (General)
   ========================================== */

button {
    background-color: @bg_elevated;
    color: @text_primary;
    border: 1px solid @border_inactive;
    border-radius: 8px;
    padding: 8px 16px;
    transition: all 150ms ease;
}

button:hover {
    background-color: @bg_hover;
    border-color: @text_muted;
}

button:active,
button:checked {
    background-color: @bg_brass_dark;
    border-color: @accent;
    color: @accent;
}

/* Suggested action buttons (primary) */
button.suggested-action {
    background-color: @accent;
    color: @text_on_accent;
    border-color: @accent;
    font-weight: 600;
}

button.suggested-action:hover {
    background-color: @accent_light;
    border-color: @accent_light;
}

/* Destructive buttons */
button.destructive-action {
    background-color: @error;
    color: @text_primary;
    border-color: @error;
}

button.destructive-action:hover {
    background-color: alpha(@error, 0.8);
}

/* ==========================================
   Selection & Rubberband
   ========================================== */

.rubberband,
rubberband {
    background-color: alpha(@accent, 0.2);
    border: 1px solid @accent;
}

selection {
    background-color: @accent;
    color: @text_on_accent;
}

/* ==========================================
   Tooltips
   ========================================== */

tooltip,
tooltip.background {
    background-color: @bg_darker;
    color: @text_primary;
    border: 1px solid @border_inactive;
    border-radius: 8px;
    padding: 6px 10px;
}

/* ==========================================
   Progress Bars
   ========================================== */

progressbar trough {
    background-color: @bg_elevated;
    border-radius: 4px;
}

progressbar progress {
    background-color: @accent;
    border-radius: 4px;
}

/* ==========================================
   Checkboxes & Radio Buttons
   ========================================== */

checkbutton check,
radiobutton radio {
    background-color: @bg_elevated;
    border: 2px solid @border_inactive;
    border-radius: 4px;
    min-width: 18px;
    min-height: 18px;
}

checkbutton check:hover,
radiobutton radio:hover {
    border-color: @text_muted;
}

checkbutton check:checked,
radiobutton radio:checked {
    background-color: @accent;
    border-color: @accent;
    color: @text_on_accent;
}

radiobutton radio {
    border-radius: 50%;
}

/* ==========================================
   Separators
   ========================================== */

separator {
    background-color: @border_inactive;
    min-width: 1px;
    min-height: 1px;
}

/* ==========================================
   Info Bars & Notifications
   ========================================== */

infobar {
    background-color: @bg_elevated;
    border-bottom: 1px solid @border_inactive;
}

infobar.info {
    background-color: alpha(@info, 0.15);
    border-color: @info;
}

infobar.warning {
    background-color: alpha(@warning, 0.15);
    border-color: @warning;
}

infobar.error {
    background-color: alpha(@error, 0.15);
    border-color: @error;
}

/* ==========================================
   Floating Bar (bottom status)
   ========================================== */

.floating-bar {
    background-color: @bg_darker;
    color: @text_muted;
    border-radius: 8px;
    padding: 4px 12px;
    margin: 8px;
    border: 1px solid @border_inactive;
}

/* ==========================================
   Empty State / Placeholder
   ========================================== */

.dim-label,
.placeholder {
    color: @text_muted;
}

/* ==========================================
   Thumbnail Styling
   ========================================== */

.thumbnail {
    border-radius: 6px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

/* ==========================================
   Emblems & Badges
   ========================================== */

.emblem {
    background-color: @accent;
    color: @text_on_accent;
    border-radius: 50%;
}

/* ==========================================
   Folder Icons - Recolor to Gold
   ========================================== */

/* Folder icons in the main view */
.nautilus-canvas-item.folder image,
.nautilus-list-view .folder image,
gridview .folder-icon,
listview .folder-icon,
image.folder,
.icon-item-icon image {
    -gtk-icon-filter: none;
}

/* Target folder icons specifically using CSS recoloring */
.view image,
gridview image,
listview image,
columnview image {
    -gtk-icon-palette: warning @accent, success @success, error @error;
}

/* Sidebar folder icons */
.navigation-sidebar image,
placessidebar image,
.sidebar image {
    -gtk-icon-palette: warning @accent, success @success, error @error;
    color: @accent;
}

/* Specifically target the folder class */
.folder image,
image.icon-dropshadow {
    -gtk-icon-palette: warning @accent, success @success, error @error;
}

/* Icon recoloring for symbolic icons */
.nautilus-window image.icon-dropshadow,
.content-view image {
    -gtk-icon-palette: warning @accent, success @success, error @error;
}

/* Force folder color on all icon widgets that could be folders */
.view .icon image,
.content-view .icon image,
flowboxchild image {
    -gtk-icon-palette: warning @accent, success @success, error @error;
}

/* ==========================================
   Dialogs
   ========================================== */

dialog,
messagedialog {
    background-color: @bg_primary;
    color: @text_primary;
    border-radius: 16px;
}

dialog headerbar,
messagedialog headerbar {
    background-color: @bg_primary;
    border-bottom: none;
}
