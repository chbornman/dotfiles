# Yazi Configuration - Capstan OpenCode

[manager]
ratio          = [ 1, 4, 3 ]
sort_by        = "alphabetical"
sort_sensitive = false
sort_reverse   = false
sort_dir_first = true
linemode       = "size"
show_hidden    = false
show_symlink   = true

[preview]
tab_size        = 2
max_width       = 1000
max_height      = 1000
cache_dir       = ""
image_filter    = "triangle"
image_quality   = 75

[opener]
edit = [
	{ run = 'nvim "$@"', block = true, for = "unix" },
]
open = [
	{ run = 'xdg-open "$@"', orphan = true, for = "unix" },
]

[open]
rules = [
	{ mime = "text/*", use = "edit" },
	{ mime = "application/json", use = "edit" },
	{ mime = "application/x-yaml", use = "edit" },
	{ mime = "*/javascript", use = "edit" },
	{ name = "*.md", use = "edit" },
	{ name = "*.toml", use = "edit" },
	{ name = "*.conf", use = "edit" },
	{ name = "*.ini", use = "edit" },
	{ name = "*.rs", use = "edit" },
	{ name = "*.py", use = "edit" },
	{ name = "*.sh", use = "edit" },
	
	# Fallback: use system default for everything else
	{ mime = "*", use = "open" },
]

[tasks]
micro_workers    = 10
macro_workers    = 25
bizarre_retry    = 5
image_alloc      = 536870912  # 512MB
image_bound      = [ 0, 0 ]
suppress_preload = false

[plugin]

prepend_fetchers = []
append_fetchers  = []
prepend_preloaders = []
append_preloaders  = []
prepend_previewers = []
append_previewers  = []

[log]
enabled = false
